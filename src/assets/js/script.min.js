"use strict";app.config({provide:["typeahead"],smoothScroll:false,saveState:false,});app.dir.vendor="http://localhost:3000/assets/vendor/";app.ready(function(){if(window["Bloodhound"]){var theadminComponents=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("tokens"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:app.dir.assets+"data/json/files.json",cache:false}});$("#theadmin-search input").typeahead(null,{name:"theadmin-components",display:"title",source:theadminComponents,templates:{suggestion:function(data){return'<a href="'+location.origin+"/"+data.url+'"><h6 class="mb-1">'+data.title+"</h6><small>"+data.description+"</small></a>"}}});$("#theadmin-search input").bind("typeahead:select",function(ev,data){window.location.href=location.origin+"/"+data.url});$("#theadmin-search input").bind("typeahead:open",function(ev,data){$(this).closest("#theadmin-search").find(".lookup-placeholder span").css("opacity","0")});$("#theadmin-search input").bind("typeahead:close",function(ev,data){if($(this).val()==""){$(this).closest("#theadmin-search").find(".lookup-placeholder span").css("opacity","1")}})}var demo_colors=["primary","secondary","success","info","warning","danger","purple","pink","cyan","yellow","brown","dark"];$('[data-provide~="demo-color-changer"]').each(function(){var target=$(this).data("target"),baseClass=$(this).data("base-class"),html="",name=$(this).dataAttr("name",""),checked=$(this).dataAttr("checked",""),exclude=$(this).dataAttr("exclude",""),prefix="";if($(this).hasDataAttr("pale")){prefix="pale-"}if(name==""){name=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}html='<div class="color-selector color-selector-sm">';$.each(demo_colors,function(i,key){if(exclude.indexOf(key)>-1){return}var color=prefix+key;html+="<label"+(prefix==="pale-"?' class="inverse"':"")+'><input type="radio" value="'+color+'" name="'+name+'"'+(checked===key?" checked":"")+'><span class="bg-'+color+'"></span></label>'});html+="</div>";$(this).replaceWith(html);$(document).on("change",'input[name="'+name+'"]',function(){var val=$('input[name="'+name+'"]:checked').val();$(target).attr("class",baseClass+val)})});$(document).on("click","#btn-new-pinpai",function(){var html=""+'<div class="form-group row align-items-center">'+'<div class="col-md-5">'+'<select class="form-control">'+"<option>一级分类</option>"+"<option>Ketchup</option>"+"<option>Relish</option>"+"<option>Relish</option>"+"</select>"+"</div>"+'<div class="col-md-5">'+'<select class="form-control">'+"<option>二级分类</option>"+"<option>Ketchup</option>"+"<option>Relish</option>"+"<option>Relish</option>"+"</select>"+"</div>"+'<a class="text-danger pl-12" id="btn-remove-pinpai" href="#" title="Remove" data-provide="tooltip"><i class="ti-close"></i></a>'+"</div>";$(this).before(html)});$(document).on("click","#btn-remove-pinpai",function(){$(this).closest(".form-group").fadeOut(function(){$(this).remove()})});$(document).on("click","#confirm_delivery",function(){var url=$(this).data("target");var ids="";var item=$(this);var value1=$("#ordernumber").val();var value2=$("#orderfirm").val();if(value1!=""&&value2!=""){app.modaler({html:"确认发货？确认后订单状态将变为已发货，且不可逆",type:"top",size:"sm",title:"确认发货",confirmText:"确认",cancelVisible:true,cancelText:"取消",onConfirm:function(modal){$("form").submit()}})}});$(document).on("click","#confirm_arriv",function(){var url=$(this).data("target");var ids="";var item=$(this);var value1=$("#ordernumber").val();var value2=$("#orderfirm").val();app.modaler({html:"确认到货？确认后订单状态将变为已到货，且不可逆",type:"top",size:"sm",title:"确认到货",confirmText:"确认",cancelVisible:true,cancelText:"取消",onConfirm:function(modal){$("#arriv_foot").hide()}})});$(document).on("click",'[data-perform="delete-remove"]',function(){var url=$(this).data("target");var ids="";var item=$(this);app.modaler({html:"确认清空任务组？清空后，采集数据将重新同步！",type:"top",size:"sm",title:"确认清空",confirmText:"Yes,清空！",cancelVisible:true,cancelText:"取消",onConfirm:function(modal){if(item.closest("tr").length){ids=item.closest("tr").fadeOut(900).data("id")}else{ids=item.closest(".media").fadeOut(900).data("id")}$.post(url,{id:ids},function(data){app.toast("已成功删除")})}})});$(document).on("click",'[data-perform="delete-single"]',function(){var url=$(this).data("target");var ids="";var item=$(this);app.modaler({html:"确认删除？删除后数据将无法恢复！",type:"top",size:"sm",title:"确认删除",confirmText:"Yes,删除！",cancelVisible:true,cancelText:"取消",onConfirm:function(modal){if(item.closest("tr").length){ids=item.closest("tr").fadeOut(900).data("id")}else{ids=item.closest(".media").fadeOut(900).data("id")}$.post(url,{id:ids},function(data){app.toast("已成功删除")})}})});$("#resetBtn").on("click",function(){$(".value_reset").val("");$("select").selectpicker("val",["一级分类","二级分类","品牌","全部来源"]);$("#order_statu").selectpicker("val",["订单状态"])})});